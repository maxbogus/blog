{% extends "base.html" %}

{% block content %}
<body>
{% for post in posts %}
<div class="post">
    <div class="post-heading">
        <a href="/blog/{{post.key().id()}}" class="post-title">{{post.subject}}</a>
        <div class="post-date">{{post.created.strftime('%b %d, %Y')}}</div>
        <div class="post-like">Likes: {{post.liked_by|length}}</div>
        {% if logged %}
        {% if user.name == post.author %}
        <a class="edit-link btn btn-primary" href="/blog/edit/{{post.key().id()}}">edit</a>
        <a class="edit-link btn btn-primary" href="/blog/delete/{{post.key().id()}}">delete</a>
        {% else %}
        <a href="/blog/like/{{post.key().id()}}" class="link">like</a>
        {% endif %}
        {% endif %}
    </div>
    <pre class="post-content">{{post.content}}</pre>
    <input type="hidden" name="author" value="{{user.name}}">
</div>
{% endfor%}
{% endblock %}
